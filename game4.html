<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Mind Reader | Musab ƒ∞kbal SUBA≈ûI</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&family=Playfair+Display:wght@400;600;700&display=swap');

        :root {
            --navy: #0A192F;
            --navy-light: #112240;
            --gold: #D4AF37;
            --cream: #F8F8F0;
            --white: #ffffff;
            --success: #2ecc71;
            --error: #e74c3c;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; user-select: none; }

        body {
            background-color: var(--navy);
            color: var(--cream);
            font-family: 'Lato', sans-serif;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* --- HEADER --- */
        header {
            width: 100%;
            padding: 20px;
            text-align: center;
            border-bottom: 2px solid var(--gold);
            background: var(--navy-light);
        }

        h1 {
            font-family: 'Playfair Display', serif;
            color: var(--gold);
            margin: 0;
            font-size: 1.8rem;
        }

        .subtitle {
            font-size: 0.9rem;
            opacity: 0.8;
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        /* --- GAME CONTAINER --- */
        #game-stage {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            width: 100%;
            max-width: 600px;
            padding: 20px;
            text-align: center;
        }

        /* --- CARDS --- */
        .card {
            background: var(--navy-light);
            border: 2px solid var(--gold);
            border-radius: 15px;
            padding: 30px;
            width: 100%;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            animation: slideUp 0.5s ease;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .big-icon {
            font-size: 5rem;
            margin-bottom: 10px;
            display: block;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .question-text {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            margin-bottom: 25px;
            color: var(--white);
        }

        /* --- OPTIONS --- */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
        }

        .opt-btn {
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--gold);
            color: var(--gold);
            padding: 15px;
            font-size: 1.1rem;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.2s;
            font-family: 'Lato', sans-serif;
            font-weight: bold;
        }

        .opt-btn:hover {
            background: var(--gold);
            color: var(--navy);
            transform: scale(1.02);
        }

        .opt-btn.correct {
            background: var(--success);
            color: var(--navy);
            border-color: var(--success);
        }

        .opt-btn.wrong {
            background: var(--error);
            color: white;
            border-color: var(--error);
        }

        /* --- PROGRESS --- */
        .progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(255,255,255,0.1);
            margin-top: 20px;
            border-radius: 3px;
        }

        .progress-fill {
            height: 100%;
            background: var(--gold);
            width: 0%;
            transition: width 0.3s;
            border-radius: 3px;
        }

        /* --- INTRO / OUTRO --- */
        .intro-box, .outro-box {
            text-align: center;
        }
        
        .start-btn {
            background: var(--gold);
            color: var(--navy);
            border: none;
            padding: 15px 40px;
            font-size: 1.2rem;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            margin-top: 20px;
            box-shadow: 0 5px 15px rgba(212, 175, 55, 0.4);
            transition: transform 0.2s;
        }

        .start-btn:hover { transform: scale(1.05); }

        .profile-result {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            text-align: left;
        }

        /* --- FOOTER --- */
        footer {
            margin-top: auto;
            padding: 15px;
            font-size: 0.8rem;
            color: rgba(255,255,255,0.5);
        }
    </style>
</head>
<body>

    <header>
        <h1>Private Tutoring: Musab ƒ∞kbal SUBA≈ûI</h1>
        <div class="subtitle">The Mind Reader: Personality Decoder</div>
    </header>

    <div id="game-stage">
        <!-- Content injected via JS -->
    </div>

    <footer>
        Game based on "Fun Personality Quiz" ‚Ä¢ Beginner A1-A2
    </footer>

    <script>
        /* --- GAME DATA --- */
        const levels = [
            // LEVEL 1: VOCABULARY MATCH
            {
                type: "quiz",
                icon: "üß©",
                q: "What is a 'Personality Test'?",
                options: [
                    "A quiz about your body.",
                    "A quiz about what kind of person you are.",
                    "A difficult math exam."
                ],
                a: 1, // Index of correct answer
                voice: "What is a personality test?"
            },
            {
                type: "quiz",
                icon: "üî≠",
                q: "What do we use 'Binoculars' for?",
                options: [
                    "To see things far away.",
                    "To listen to music.",
                    "To cook dinner."
                ],
                a: 0,
                voice: "What do we use Binoculars for?"
            },
            {
                type: "quiz",
                icon: "üïØÔ∏è",
                q: "What is a 'Candlestick'?",
                options: [
                    "A stick for walking.",
                    "A holder for a candle.",
                    "A sweet candy."
                ],
                a: 1,
                voice: "What is a candlestick?"
            },
            
            // LEVEL 2: THE DECODER (Illusion Meanings)
            {
                type: "quiz",
                icon: "üêä",
                q: "If you see the Crocodile, you are...",
                options: [
                    "A risk taker.",
                    "Careful and don't take risks.",
                    "Very sad."
                ],
                a: 1,
                voice: "If you see the Crocodile, what kind of person are you?"
            },
            {
                type: "quiz",
                icon: "üö§",
                q: "If you see the Boat, you are...",
                options: [
                    "Creative but forgetful.",
                    "Angry and nervous.",
                    "Afraid of water."
                ],
                a: 0,
                voice: "If you see the Boat, what kind of person are you?"
            },
            {
                type: "quiz",
                icon: "üê∞",
                q: "If you see the Rabbit, you are...",
                options: [
                    "Emotional (Heart).",
                    "Logical (Brain).",
                    "Hungry."
                ],
                a: 1,
                voice: "If you see the Rabbit, are you emotional or logical?"
            },
            {
                type: "quiz",
                icon: "ü¶Ü",
                q: "If you see the Duck, you are...",
                options: [
                    "Logical (Brain).",
                    "Emotional (Heart).",
                    "A bird watcher."
                ],
                a: 1,
                voice: "If you see the Duck, are you emotional or logical?"
            },
            {
                type: "quiz",
                icon: "üë¥",
                q: "If you see the Old Man, you use your...",
                options: [
                    "Right Brain (Creative).",
                    "Left Brain (Analytical).",
                    "Feet."
                ],
                a: 0,
                voice: "If you see the Old Man, which side of your brain do you use?"
            },

            // LEVEL 3: SELF ANALYSIS (No wrong answers, builds profile)
            {
                type: "self",
                icon: "üñºÔ∏è",
                q: "Look at the illusion. Do you see FACES üôÇ or a CANDLESTICK üïØÔ∏è?",
                options: [
                    { text: "I see Faces üôÇ", trait: "Social Person" },
                    { text: "I see a Candlestick üïØÔ∏è", trait: "Introverted (Like being alone)" }
                ],
                voice: "Do you see faces, or a candlestick?"
            },
            {
                type: "self",
                icon: "üñºÔ∏è",
                q: "Do you see a CAR üöó or BINOCULARS üî≠?",
                options: [
                    { text: "I see a Car üöó", trait: "Free Spirit (Loves Traveling)" },
                    { text: "I see Binoculars üî≠", trait: "Visual Learner" }
                ],
                voice: "Do you see a car, or binoculars?"
            }
        ];

        /* --- GAME STATE --- */
        let currentLevel = 0;
        let score = 0;
        let userProfile = [];
        const stage = document.getElementById('game-stage');

        /* --- SPEECH --- */
        function speak(text) {
            window.speechSynthesis.cancel();
            const u = new SpeechSynthesisUtterance(text);
            u.lang = 'en-US';
            u.rate = 1;
            window.speechSynthesis.speak(u);
        }

        /* --- SCREENS --- */
        function showIntro() {
            stage.innerHTML = `
                <div class="intro-box card">
                    <span class="big-icon">üß†</span>
                    <h2>Welcome to the Personality Decoder</h2>
                    <p style="margin: 20px 0; line-height: 1.6;">
                        Can you decode the hidden meanings of pictures?<br>
                        Test your knowledge of the "Fun Personality Quiz" slides.
                    </p>
                    <button class="start-btn" onclick="startGame()">Start Game</button>
                </div>
            `;
        }

        function startGame() {
            currentLevel = 0;
            score = 0;
            userProfile = [];
            loadLevel();
        }

        function loadLevel() {
            if (currentLevel >= levels.length) {
                showOutro();
                return;
            }

            const data = levels[currentLevel];
            
            // Generate Options HTML
            let optionsHtml = '';
            if (data.type === 'quiz') {
                data.options.forEach((opt, idx) => {
                    optionsHtml += `<button class="opt-btn" onclick="handleAnswer(${idx})">${opt}</button>`;
                });
            } else {
                // Self Analysis Mode
                data.options.forEach((opt, idx) => {
                    optionsHtml += `<button class="opt-btn" onclick="handleSelf('${opt.trait}')">${opt.text}</button>`;
                });
            }

            // Render
            stage.innerHTML = `
                <div class="card">
                    <span class="big-icon">${data.icon}</span>
                    <div class="question-text">${data.q}</div>
                    <div class="options-grid">
                        ${optionsHtml}
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${(currentLevel / levels.length) * 100}%"></div>
                    </div>
                </div>
            `;

            // Speak Question
            setTimeout(() => speak(data.voice), 500);
        }

        function handleAnswer(selectedIndex) {
            const data = levels[currentLevel];
            const buttons = document.querySelectorAll('.opt-btn');
            
            // Disable buttons
            buttons.forEach(btn => btn.style.pointerEvents = 'none');

            if (selectedIndex === data.a) {
                // Correct
                buttons[selectedIndex].classList.add('correct');
                score++;
                speak("Correct!");
            } else {
                // Wrong
                buttons[selectedIndex].classList.add('wrong');
                buttons[data.a].classList.add('correct'); // Show correct one
                speak("Incorrect.");
            }

            setTimeout(() => {
                currentLevel++;
                loadLevel();
            }, 2000);
        }

        function handleSelf(trait) {
            const buttons = document.querySelectorAll('.opt-btn');
            buttons.forEach(btn => btn.style.pointerEvents = 'none');
            
            userProfile.push(trait);
            speak(`I see. You are a ${trait}.`);

            setTimeout(() => {
                currentLevel++;
                loadLevel();
            }, 2000);
        }

        function showOutro() {
            let grade = "";
            const totalQuizQs = levels.filter(l => l.type === 'quiz').length;
            
            if (score === totalQuizQs) grade = "Master Psychologist ü•á";
            else if (score > totalQuizQs / 2) grade = "Good Observer ü•à";
            else grade = "Beginner Student ü•â";

            let profileHtml = userProfile.map(t => `<div class="profile-result">‚ú® ${t}</div>`).join('');

            stage.innerHTML = `
                <div class="outro-box card">
                    <span class="big-icon">üèÜ</span>
                    <h2>Certificate of Completion</h2>
                    <p>Score: ${score} / ${totalQuizQs}</p>
                    <h3 style="color:var(--gold); margin-bottom: 20px;">Rank: ${grade}</h3>
                    
                    <div style="border-top: 1px solid rgba(255,255,255,0.2); padding-top: 15px; margin-top: 15px;">
                        <h4>Musab's Personality Profile:</h4>
                        ${profileHtml}
                    </div>

                    <button class="start-btn" onclick="startGame()">Play Again</button>
                    <br><br>
                    <a href="index.html" style="color:var(--cream); text-decoration:none;">‚Üê Back to Dashboard</a>
                </div>
            `;
            speak(`Game Over. You are a ${grade}.`);
        }

        // Start
        showIntro();

    </script>
</body>
</html>
